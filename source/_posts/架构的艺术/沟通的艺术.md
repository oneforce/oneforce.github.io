
程序员中，交流是必须的。但是交流的结果是不重要的。
什么是重要的？我认为是交流的过程，和基于问题达成的目标共识，而不是解决方案共识

这里有点绕，但是我想说明下

举个例子，历史代码中有下面的代码，如

```
public class Repsone<T>{
  private Integer status,
  private String message;
  private T data;
}
```

当有错误返回时，返回下面的数据（java对象已转出json，下同）

```
{status:1, message:'输入参数用户姓名为空'}
```

当处理正常时，又是会返回下面的数据

```
{status:0, data:'工单1234567890已创建成功'}
```

这里，前段的工程师就有了要求，成功的提示信息是否应该放在字段message来处理，是不是更统一。这就引起的前后端的大讨论。

> 这里说明下，我们不讨论历史代码的定义和结构问题，仅针对这个问题来一起讨论

### 立场

* **后台**：我都可以做，但是历史代码时凡在data上的，如果我现在改，就造成了系统的行为不一致。等后台整体改动，我一起改。现在我拒绝
* **前段**：既然知道是错的，我们为什么还要继续错下去？为什么不是现在改，越晚改越难改，越不能改。

最后这个问题上升到我这边。我也参加了这次的讨论。

### 我的观点

1. 这个问题不是正确与否的问题，而是优雅不优雅的问题。所以两方的方案我都能接受
1. 原先的系统中的这种行为不一致是存在的，但是我希望保持一贯性和统一性，这对新员工来说比较好
1. 但是我需要在基于现有的情况下，给出合理的边界定义，不能让前段同学认为我在偏袒后端，不能失了我的公信力

### 实际讨论的过程

> 我们要定义清楚什么是前段、什么是后台？

前段负责页面展示，后台负责业务逻辑。这点大家达成共识。

> message:输入参数用户姓名为空, data: 工单1234567890已创建成功 这是什么?

这是页面展示的内容。（第一次共识）

> 前段展示的内容为什么要求后台返回？是否可以不返回页面展示的内容

后台应该返回特定的错误码，然后前段统一控制页面展示信息。 这点达成共识，但是基于现有系统，这个改动前后端成本及其昂贵，前段同学也不愿意这样改。

**这就说明业界的标准方案并不适合我们现有的架构体系。我们需要基于标准找到适合我们自己的标准** 达成共识


> 对于之前的 `message:输入参数用户姓名为空, data: 工单1234567890已创建成功` 是页面展示的内容吗?


经过讨论，我们重新定义梳理了我们的标准

* data: 工单1234567890已创建成功 是业务数据，而不是提示信息
*　message:输入参数用户姓名为空，这个是错误提示信息，

我们定义message实际是errorMessage的缩写，这样整个体系就建立

*　当状态为0时，我们需要返回业务数据，所以我们将 data: 工单1234567890已创建成功  放到了 data中。这个是业务数据。业务数据。业务数据。
* 当message是errorMessage的简称，当有错误发生，我们将错误的放在errorMessage（message）中。

这个是我们讨论后的一个标准（基于我们自己的体系架构和现状）

### 结果

我们后台保留现状，不用修改。前段同学的希望没有实现。


好像什么也没有发生。但是事实上，我们定义的目标、规范。

* **目标**：前后端分立
* **规范**：所以后台返回的都是业务数据，前端不参与任何业务有关的计算、流程转换等。后台不返回任何页面展示的数据，返回的是业务数据。前段是否对业务数据进行加工，后台不关心。

可能有点人会说：你这个是狡辩。

但是

我们是否了解业界的统一解决方案？大家都知道。

我们是否明确前后端分离这个长期目标？大家都明确

我们是否知道正确方法的处理方法？我们都知道。

那么，基于现状而做的妥协，谁来修改，谁来维护，对我而言是不重要的。因为这个方案本来就是一种妥协。

讨论的过程比讨论的结果更重要。我相信在后面开发工作中，就不会出现前后端有歧义的地方了。

## 后记

整个系统按照我们这个规范定义了，但是引入一个问题生产事故：JSON解析的问题。我也很懵逼。这个已经是对于现有系统无改动的共识，这都能造成生产事故，无语了。
